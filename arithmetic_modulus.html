<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>modulus Function - BFT</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    
        <meta name="description" content="Reference for the  function">
    
    <link rel="stylesheet" href="./assets/supplementary/terminal.css">
    <link rel="stylesheet" href="./assets/supplementary/style.css">
</head>

<body class="terminal">
    <header class="container terminal-nav">
        <div class="terminal-logo">
            <div class="logo terminal-prompt">
                <a href="#">The BFT</a>
            </div>
        </div>
        <nav class="terminal-menu">
            <ul>
                <li>
                    <a href="./index.html" class="menu-item">Function Index</a>
                </li>
            </ul>
        </nav>
    </header>

    <article class="container">
        <h2>Modulus</h2>
        <section>
            <p>
                Defined in <a href="https://github.com/substrait-io/substrait/blob/main/extensions/functions_arithmetic.yaml">functions_arithmetic.yaml</a>
            </p>
            <hr>
            <p>
                Calculate the remainder (r) when dividing dividend (x) by divisor (y).
In mathematics, many conventions for the modulus (mod) operation exists. The result of a mod operation depends on the software implementation and underlying hardware. Substrait is a format for describing compute operations on structured data and designed for interoperability. Therefore the user is responsible for determining a definition of division as defined by the quotient (q).
The following basic conditions of division are satisfied: (1) q ∈ ℤ (the quotient is an integer) (2) x = y * q + r (division rule) (3) abs(r) < abs(y) where q is the quotient.
The `division_type` option determines the mathematical definition of quotient to use in the above definition of division.
When `division_type`=TRUNCATE, q = trunc(x/y). When `division_type`=FLOOR, q = floor(x/y).
In the cases of TRUNCATE and FLOOR division: remainder r = x - round_func(x/y)
The `on_domain_error` option governs behavior in cases where y is 0, y is +/-inf, or x is +/-inf. In these cases the mod is undefined. The `overflow` option governs behavior when integer overflow occurs. If x and y are both 0 or both +/-infinity, behavior will be governed by `on_domain_error`.

            </p>
        </section>
        <hr>
        <section id="options">
            <h3>Options&nbsp;<a href="#options">&para;</a></h3>
            
                <h4>Division_type</h4>
                <p>Determines the nature of division rounding function and quotient
evaluation that shall lead to the reminder. The reminder will be
determined by  r = x - round_func(x/y)</p>
                <dl>
                    
                    <dt>FLOOR</dt>
                    <dd><p>The quotient is evaluated i.e. the round_func(x/y) is floored,
thus the fractional result is rounded to the largest integer
value less than or equal to it.</p>
                    </dd>
                    
                    <dt>TRUNCATE</dt>
                    <dd><p>The quotient is evaluated i.e. the round_func(x/y) is truncated,
thus the fractional result is rounded towards zero.</p>
                    </dd>
                    
                </dl>
            
                <h4>Overflow</h4>
                <p>The modulus operation typically occurs after finding the quotient,
i.e., mod(x, y) = x - round_func(x/y), where the round_func can be
to truncate, floor, or any such operation. Thus, the entire operation
may trigger an overflow when the result is outside the representable
range of the type class. This option controls what happens when this overflow occurs.</p>
                <dl>
                    
                    <dt>ERROR</dt>
                    <dd><p>If an overflow occurs then an error should be raised.</p>
                    </dd>
                    
                    <dt>SILENT</dt>
                    <dd><p>If an overflow occurs then an integer value will be returned. The value is
undefined. It may be any integer and can change from engine to engine or
even from row to row within the same query.  The only constraint is that it
must be a valid value for the result type class (e.g. modulus of int16
cannot yield an int32 on overflow)</p>
                    </dd>
                    
                    <dt>SATURATE</dt>
                    <dd><p>If an overflow occurs then the largest (for positive overflow) or smallest
(for negative overflow) possible value for the type class will be returned.</p>
                    </dd>
                    
                </dl>
            
                <h4>On_domain_error</h4>
                <p>Option controls what happens when the dividend is ±infinity or
the divisor is 0 or ±infinity in a divide function.</p>
                <dl>
                    
                    <dt>ERROR</dt>
                    <dd><p>If the dividend is ±infinity or the divisor is 0 or ±infinity,
an error should be raised.</p>
                    </dd>
                    
                    <dt>NULL</dt>
                    <dd><p>Return a NULL if the dividend is ±infinity or the divisor is 0
or ±infinity.</p>
                    </dd>
                    
                </dl>
            
        </section>
        <hr>
        <section id="kernels">
            <h3>Kernels&nbsp;<a href="#kernels">&para;</a></h3>
            <ul>
                
                <li class="bft-kernel"><span>modulus(i8, i8) -> i8 : [division_type, overflow, on_domain_error]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>modulus(i16, i16) -> i16 : [division_type, overflow, on_domain_error]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>modulus(i32, i32) -> i32 : [division_type, overflow, on_domain_error]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>modulus(i64, i64) -> i64 : [division_type, overflow, on_domain_error]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
            </ul>
        </section>
        <hr>
        <section id="dialects">
            <h3>Dialects&nbsp;<a href="#dialects">&para;</a></h3>
            <select id="dialect">
                
                <option>snowflake</option>
                
                <option>sqlite</option>
                
                <option>datafusion</option>
                
                <option>postgres</option>
                
                <option>cudf</option>
                
                <option>velox_presto</option>
                
                <option>duckdb</option>
                
            </select>
            
            <dl class="dialect-definition" id="dialect-snowflake">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-sqlite">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-datafusion">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-postgres">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-cudf">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-velox_presto">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-duckdb">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
        </section>
        <hr>
        <section id="details">
            <h3>Details&nbsp;<a href="#details">&para;</a></h3>
            
                
                    <h4>Overflow</h4>
                    <p>The Modulus function requires the Overflow option in situations
where any or all of the involved operations result in overflow
from the specified range. For example, in mod(-128, -1) within
the int8 range, an overflow will occur as the operation will
lead to (-128) - round_func(-128/-1). Since the division operation
(-128/-1) results in an overflow (given that the range of int8
is -127 to 128), the Overflow option becomes essential.</p>
                
                    <h4>Not commutative</h4>
                    <p>Modulus as an arithmetic operation is not commutative by nature.</p>
                
            
        </section>
        <hr>
        <section id="properties">
            <h3>Properties&nbsp;<a href="#properties">&para;</a></h3>
            
                <dl>
                    
                        <dt>NaN propagating</dt>
                        <dd><p>If any of the inputs is NaN (and the other input is not null) then the output
will be NaN</p></dd>
                    
                        <dt>Null propagating</dt>
                        <dd><p>If any of the inputs is null then the output will be null</p></dd>
                    
                        <dt>Stateless</dt>
                        <dd><p>The output will be the same regardless of the order of input rows. This is not
guaranteed to be true for integer division when overflow is SILENT.</p></dd>
                    
                </dl>
            
        </section>
        <hr>
        <section id="examples">
            <h3>Examples&nbsp;<a href="#examples">&para;</a></h3>
            
            <table>
                <caption>Basic examples without any special cases</caption>
                <thead>
                    <tr>
                        
                        
                        <th>arg1 (i64)</th>
                        
                        <th>arg2 (i64)</th>
                        
                        <th>result (i64)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        
                        <td>9</td>
                        
                        <td>3</td>
                        
                        <td>0</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>10</td>
                        
                        <td>-3</td>
                        
                        <td>1</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>32767</td>
                        
                        <td>1000</td>
                        
                        <td>767</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>-2147483647</td>
                        
                        <td>300000000</td>
                        
                        <td>-47483647</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>-9223372036854775800</td>
                        
                        <td>-80000000000000</td>
                        
                        <td>-12036854775800</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>5</td>
                        
                        <td>None</td>
                        
                        <td>None</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>None</td>
                        
                        <td>1</td>
                        
                        <td>None</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>None</td>
                        
                        <td>None</td>
                        
                        <td>None</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
            <table>
                <caption>Examples demonstrating truncate and floor division types</caption>
                <thead>
                    <tr>
                        
                        <th>division_type</th>
                        
                        
                        <th>arg1 (i8)</th>
                        
                        <th>arg2 (i8)</th>
                        
                        <th>result (i8)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        <td>TRUNCATE</td>
                        
                        
                        <td>8</td>
                        
                        <td>-3</td>
                        
                        <td>2</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        <td>FLOOR</td>
                        
                        
                        <td>8</td>
                        
                        <td>-3</td>
                        
                        <td>-1</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
            <table>
                <caption>Examples demonstrating operation when the divisor is 0</caption>
                <thead>
                    <tr>
                        
                        <th>on_domain_error</th>
                        
                        
                        <th>arg1 (i8)</th>
                        
                        <th>arg2 (i8)</th>
                        
                        <th>result (i8)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        <td>NULL</td>
                        
                        
                        <td>5</td>
                        
                        <td>0</td>
                        
                        <td>None</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        <td>ERROR</td>
                        
                        
                        <td>5</td>
                        
                        <td>0</td>
                        
                        <td>ERROR</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
        </section>
    </article>
    <script src="./assets/supplementary/script.js"></script>
    <script>
      var bftDialects = {
        
        'snowflake': {
            examples: [
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'sqlite': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect sqlite expects division_type=TRUNCATE but division_type=FLOOR was requested",
                
                
                
                  null,
                
                
                
                  "The dialect sqlite expects on_domain_error=NULL but on_domain_error=ERROR was requested",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'datafusion': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect datafusion expects division_type=TRUNCATE but division_type=FLOOR was requested",
                
                
                
                  "The dialect datafusion expects on_domain_error=ERROR but on_domain_error=NULL was requested",
                
                
                
                  null,
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'postgres': {
            examples: [
                
                
                  "The dialect postgres does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  "The dialect postgres does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect postgres does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect postgres does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  "The dialect postgres does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  "The dialect postgres does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  "The dialect postgres does not support the kernel arithmetic.modulus(i8, i8) -> error",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'cudf': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect cudf expects division_type=FLOOR but division_type=TRUNCATE was requested",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect cudf expects on_domain_error=NULL but on_domain_error=ERROR was requested",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'velox_presto': {
            examples: [
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.modulus(i16, i16) -> i16",
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.modulus(i32, i32) -> i32",
                
                
                
                  null,
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.modulus(i8, i8) -> i8",
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.modulus(i8, i8) -> error",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'duckdb': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect duckdb expects division_type=TRUNCATE but division_type=FLOOR was requested",
                
                
                
                  null,
                
                
                
                  "The dialect duckdb expects on_domain_error=NULL but on_domain_error=ERROR was requested",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
      };
      window.addEventListener('load', function() {
        window.bftInitialize(bftDialects);
      });
    </script>
</body>
</html>