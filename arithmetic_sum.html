<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>sum Function - BFT</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    
        <meta name="description" content="Reference for the  function">
    
    <link rel="stylesheet" href="./assets/supplementary/terminal.css">
    <link rel="stylesheet" href="./assets/supplementary/style.css">
</head>

<body class="terminal">
    <header class="container terminal-nav">
        <div class="terminal-logo">
            <div class="logo terminal-prompt">
                <a href="#">The BFT</a>
            </div>
        </div>
        <nav class="terminal-menu">
            <ul>
                <li>
                    <a href="./index.html" class="menu-item">Function Index</a>
                </li>
            </ul>
        </nav>
    </header>

    <article class="container">
        <h2>Sum</h2>
        <section>
            <p>
                Defined in <a href="https://github.com/substrait-io/substrait/blob/main/extensions/functions_arithmetic.yaml">functions_arithmetic.yaml</a>
            </p>
            <hr>
            <p>
                Sum a set of values. The sum of zero elements yields null.
            </p>
        </section>
        <hr>
        <section id="options">
            <h3>Options&nbsp;<a href="#options">&para;</a></h3>
            
                <h4>Overflow</h4>
                <p>Sum of a set of values can trigger an overflow when the result is outside the
representable range of the type class. This option controls what happens when
this overflow occurs.</p>
                <dl>
                    
                    <dt>SILENT</dt>
                    <dd><p>If an overflow occurs then an integer value will be returned. The value is
undefined. It may be any integer and can change from engine to engine or
even from row to row within the same query.  The only constraint is that it
must be a valid value for the result type class (e.g. adding two int16 cannot
yield an int32 on overflow)</p>
                    </dd>
                    
                    <dt>SATURATE</dt>
                    <dd><p>If an overflow occurs then the largest (for positive overflow) or smallest
(for negative overflow) possible value for the type class will be returned.</p>
                    </dd>
                    
                    <dt>ERROR</dt>
                    <dd><p>If an overflow occurs then an error should be raised.</p>
                    </dd>
                    
                </dl>
            
        </section>
        <hr>
        <section id="kernels">
            <h3>Kernels&nbsp;<a href="#kernels">&para;</a></h3>
            <ul>
                
                <li class="bft-kernel"><span>sum(i8) -> i64? : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>sum(i16) -> i64? : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>sum(i32) -> i64? : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>sum(i64) -> i64? : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>sum(fp32) -> fp64? : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>sum(fp64) -> fp64? : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
            </ul>
        </section>
        <hr>
        <section id="dialects">
            <h3>Dialects&nbsp;<a href="#dialects">&para;</a></h3>
            <select id="dialect">
                
                <option>duckdb</option>
                
                <option>snowflake</option>
                
                <option>postgres</option>
                
                <option>cudf</option>
                
                <option>sqlite</option>
                
                <option>datafusion</option>
                
                <option>velox_presto</option>
                
            </select>
            
            <dl class="dialect-definition" id="dialect-duckdb">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-snowflake">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-postgres">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-cudf">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-sqlite">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-datafusion">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-velox_presto">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
        </section>
        <hr>
        <section id="details">
            <h3>Details&nbsp;<a href="#details">&para;</a></h3>
            
                
                    <h4>Other floating point exceptions</h4>
                    <p>The IEEE 754 standard defines a number of exceptions beyond rounding. For
example, division by zero, overflow, and underflow. However, these exceptions
have default behaviors defined by IEEE 754 and, since no known engine deviates
from these default values, these exceptions are not exposed as options. For more
information on what happens in these cases refer to the IEEE 754 standard.</p>
                
                    <h4>Not commutative</h4>
                    <p>Addition, the algebraic operation, is commutative.  So it may be tempting to
believe the add function is commutative as well.  However, this is not true because
of overflow.  For example, when working with int8 the result of
add(add(120, 10), -5) will yield a different result than add(add(120, -5), 10)
because the first will overflow and the second will not.</p>
                
            
        </section>
        <hr>
        <section id="properties">
            <h3>Properties&nbsp;<a href="#properties">&para;</a></h3>
            
                <dl>
                    
                        <dt>Decomposable</dt>
                        <dd><p>The Sum aggregate function can be decomposed in more than
one intermediate steps.</p></dd>
                    
                        <dt>Intermediate</dt>
                        <dd><p>The intermediate output type of the Sum function is the
type class of the input arguments.</p></dd>
                    
                        <dt>Nullability</dt>
                        <dd><p>Specifies how the nullability of output arguments are mapped to
input arguments. The Sum aggregate function follows a
DECLARED_OUTPUT nullability.</p></dd>
                    
                </dl>
            
        </section>
        <hr>
        <section id="examples">
            <h3>Examples&nbsp;<a href="#examples">&para;</a></h3>
            
            <table>
                <caption>Basic examples without any special cases</caption>
                <thead>
                    <tr>
                        
                        
                        <th>arg1 (fp64)</th>
                        
                        <th>result (fp64)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        
                        <td>[0, -1, 2, 20]</td>
                        
                        <td>21</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>[2000000, -3217908, 629000, -100000, 0, 987654]</td>
                        
                        <td>298746</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>[2.5, 0, 5.0, -2.5, -7.5]</td>
                        
                        <td>-2.5</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>[2.5000007152557373, 7.000000715255737, 0, 7.000000715255737]</td>
                        
                        <td>16.500002145767212</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
            <table>
                <caption>Examples demonstrating exceptional floating point cases</caption>
                <thead>
                    <tr>
                        
                        
                        <th>arg1 (fp64)</th>
                        
                        <th>result (fp64)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        
                        <td>[1.5e+308, 1.5e+308, 1.5e+308]</td>
                        
                        <td>inf</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>[-1.5e+308, -1.5e+308, -1.5e+308]</td>
                        
                        <td>-inf</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>[2.500000715, 'inf', 2.500000715]</td>
                        
                        <td>inf</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>[2.5000007, '-inf', 2.5000007, 10.0]</td>
                        
                        <td>-inf</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
            <table>
                <caption>Examples with null as unput or output</caption>
                <thead>
                    <tr>
                        
                        
                        <th>arg1 (i32)</th>
                        
                        <th>result (i32)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        
                        <td>[None, None, None]</td>
                        
                        <td>None</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>[]</td>
                        
                        <td>None</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>[200000, None, 629000, -10000, 0, 987621]</td>
                        
                        <td>1806621</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
            <table>
                <caption>Examples demonstrating overflow behavior</caption>
                <thead>
                    <tr>
                        
                        <th>overflow</th>
                        
                        
                        <th>arg1 (i64)</th>
                        
                        <th>result (error)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        <td>ERROR</td>
                        
                        
                        <td>[9223372036854775806, 1, 1, 1, 1, 10000000000]</td>
                        
                        <td>ERROR</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
        </section>
    </article>
    <script src="./assets/supplementary/script.js"></script>
    <script>
      var bftDialects = {
        
        'duckdb': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect duckdb does not support the kernel arithmetic.sum(i64) -> error",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'snowflake': {
            examples: [
                
                
                  "The dialect snowflake does not support the kernel arithmetic.sum(i8) -> i8",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.sum(i32) -> i32",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.sum(fp32) -> fp32",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.sum(i16) -> i16",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.sum(i16) -> i16",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.sum(i32) -> i32",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.sum(i64) -> error",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'postgres': {
            examples: [
                
                
                  "The dialect postgres does not support the kernel arithmetic.sum(i8) -> i8",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect postgres does not support the kernel arithmetic.sum(i64) -> error",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'cudf': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'sqlite': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'datafusion': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect datafusion expects overflow=SILENT but overflow=ERROR was requested",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'velox_presto': {
            examples: [
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
                
                  "There is no dialect information for this function",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
      };
      window.addEventListener('load', function() {
        window.bftInitialize(bftDialects);
      });
    </script>
</body>
</html>