<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>abs Function - BFT</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    
        <meta name="description" content="Reference for the  function">
    
    <link rel="stylesheet" href="./assets/supplementary/terminal.css">
    <link rel="stylesheet" href="./assets/supplementary/style.css">
</head>

<body class="terminal">
    <header class="container terminal-nav">
        <div class="terminal-logo">
            <div class="logo terminal-prompt">
                <a href="#">The BFT</a>
            </div>
        </div>
        <nav class="terminal-menu">
            <ul>
                <li>
                    <a href="./index.html" class="menu-item">Function Index</a>
                </li>
            </ul>
        </nav>
    </header>

    <article class="container">
        <h2>Abs</h2>
        <section>
            <p>
                Defined in <a href="https://github.com/substrait-io/substrait/blob/main/extensions/functions_arithmetic.yaml">functions_arithmetic.yaml</a>
            </p>
            <hr>
            <p>
                Calculate the absolute value of the argument.
Integer values allow the specification of overflow behavior to handle the unevenness of the twos complement, e.g. Int8 range [-128 : 127].

            </p>
        </section>
        <hr>
        <section id="options">
            <h3>Options&nbsp;<a href="#options">&para;</a></h3>
            
                <h4>Overflow</h4>
                <p>Computing the absolute of integer values may result in overflow due to unevenness of two's complement.
This option helps control the behavior of the function when the input goes out of permissible range
of the type class.</p>
                <dl>
                    
                    <dt>SILENT</dt>
                    <dd><p>If an overflow occurs then an integer value will be returned. The value is undefined. It may be any integer and can change from engine to engine or even from row to row within the same query.  The only constraint is that it must be a valid value for the result type class.
</p>
                    </dd>
                    
                    <dt>SATURATE</dt>
                    <dd><p>If an overflow occurs then the largest (for positive overflow) or smallest (for negative overflow) possible value for the type class will be returned.
</p>
                    </dd>
                    
                    <dt>ERROR</dt>
                    <dd><p>If an overflow occurs then an error should be raised.
</p>
                    </dd>
                    
                </dl>
            
        </section>
        <hr>
        <section id="kernels">
            <h3>Kernels&nbsp;<a href="#kernels">&para;</a></h3>
            <ul>
                
                <li class="bft-kernel"><span>abs(i8) -> i8 : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>abs(i16) -> i16 : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>abs(i32) -> i32 : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>abs(i64) -> i64 : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>abs(fp32) -> fp32 : []</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>abs(fp64) -> fp64 : []</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
            </ul>
        </section>
        <hr>
        <section id="dialects">
            <h3>Dialects&nbsp;<a href="#dialects">&para;</a></h3>
            <select id="dialect">
                
                <option>duckdb</option>
                
                <option>velox_presto</option>
                
                <option>postgres</option>
                
                <option>cudf</option>
                
                <option>datafusion</option>
                
                <option>snowflake</option>
                
                <option>sqlite</option>
                
            </select>
            
            <dl class="dialect-definition" id="dialect-duckdb">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-velox_presto">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-postgres">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-cudf">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-datafusion">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-snowflake">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-sqlite">
                
                    <dt>Dialect isn't yet supported</dt>
                
            </dl>
            
        </section>
        <hr>
        <section id="details">
            <h3>Details&nbsp;<a href="#details">&para;</a></h3>
            
                
                    <h4>Non multiplicative</h4>
                    <p>Although the mathematical operation for Absolute value is multiplicative, but the function is not
due to overflow. For example, for int8, abs(-1 * -128) will not be the same as
abs(-1) * abs(-128), since the former will cause an overflow.</p>
                
                    <h4>Triangular Inequality</h4>
                    <p>Mathematically, the absolute operation has the triangular inequality, i.e. for two real numbers,
x &amp; y, abs(x+y) &lt;= abs(x) + abs(y). This might not hold true for the abs function due to overflow.
For example, for int8, abs(-127 + 1) will not be the same as abs(-127) + abs(1), since the
latter will overflow.</p>
                
            
        </section>
        <hr>
        <section id="properties">
            <h3>Properties&nbsp;<a href="#properties">&para;</a></h3>
            
                <dl>
                    
                        <dt>NaN propagating</dt>
                        <dd><p>If any of the inputs is NaN (and the other input is not null) then the output will be NaN
</p></dd>
                    
                        <dt>Null propagating</dt>
                        <dd><p>If any of the inputs is null then the output will be null
</p></dd>
                    
                        <dt>Stateless</dt>
                        <dd><p>The output will be the same regardless of the order of input rows.
</p></dd>
                    
                </dl>
            
        </section>
        <hr>
        <section id="examples">
            <h3>Examples&nbsp;<a href="#examples">&para;</a></h3>
            
            <table>
                <caption>Basic examples without any special cases</caption>
                <thead>
                    <tr>
                        
                        
                        <th>arg1 (fp64)</th>
                        
                        <th>result (fp64)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        
                        <td>25</td>
                        
                        <td>25</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>-200</td>
                        
                        <td>200</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>30000</td>
                        
                        <td>30000</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>-9223372036854775800</td>
                        
                        <td>9223372036854775800</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>2.55</td>
                        
                        <td>2.55</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>-2.0000007152557373</td>
                        
                        <td>2.0000007152557373</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
            <table>
                <caption>Examples with null as input</caption>
                <thead>
                    <tr>
                        
                        
                        <th>arg1 (i8)</th>
                        
                        <th>result (i8)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        
                        <td>None</td>
                        
                        <td>None</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
            <table>
                <caption>Examples demonstrating overflow behavior</caption>
                <thead>
                    <tr>
                        
                        <th>overflow</th>
                        
                        
                        <th>arg1 (i8)</th>
                        
                        <th>result (i8)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        <td>ERROR</td>
                        
                        
                        <td>-128</td>
                        
                        <td>ERROR</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        <td>SATURATE</td>
                        
                        
                        <td>-128</td>
                        
                        <td>127</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        <td>SILENT</td>
                        
                        
                        <td>-128</td>
                        
                        <td>UNDEFINED</td>
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
        </section>
    </article>
    <script src="./assets/supplementary/script.js"></script>
    <script>
      var bftDialects = {
        
        'duckdb': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect duckdb expects overflow=ERROR but overflow=SATURATE was requested",
                
                
                
                  "The dialect duckdb expects overflow=ERROR but overflow=SILENT was requested",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'velox_presto': {
            examples: [
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.abs(i8) -> i8",
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.abs(i16) -> i16",
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.abs(i32) -> i32",
                
                
                
                  null,
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.abs(fp32) -> fp32",
                
                
                
                  null,
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.abs(i8) -> i8",
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.abs(i8) -> error",
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.abs(i8) -> i8",
                
                
                
                  "The dialect velox_presto does not support the kernel arithmetic.abs(i8) -> undefined",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'postgres': {
            examples: [
                
                
                  "The dialect postgres does not support the kernel arithmetic.abs(i8) -> i8",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect postgres does not support the kernel arithmetic.abs(i8) -> i8",
                
                
                
                  "The dialect postgres does not support the kernel arithmetic.abs(i8) -> error",
                
                
                
                  "The dialect postgres does not support the kernel arithmetic.abs(i8) -> i8",
                
                
                
                  "The dialect postgres does not support the kernel arithmetic.abs(i8) -> undefined",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'cudf': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect cudf expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect cudf expects overflow=SILENT but overflow=SATURATE was requested",
                
                
                
                  null,
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'datafusion': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect datafusion expects overflow=ERROR but overflow=SATURATE was requested",
                
                
                
                  "The dialect datafusion expects overflow=ERROR but overflow=SILENT was requested",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'snowflake': {
            examples: [
                
                
                  "The dialect snowflake does not support the kernel arithmetic.abs(i8) -> i8",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.abs(i16) -> i16",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.abs(i32) -> i32",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.abs(i64) -> i64",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.abs(fp32) -> fp32",
                
                
                
                  null,
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.abs(i8) -> i8",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.abs(i8) -> error",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.abs(i8) -> i8",
                
                
                
                  "The dialect snowflake does not support the kernel arithmetic.abs(i8) -> undefined",
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
        'sqlite': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect sqlite expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect sqlite expects overflow=SILENT but overflow=SATURATE was requested",
                
                
                
                  null,
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
                false,
                
            ]
        },
        
      };
      window.addEventListener('load', function() {
        window.bftInitialize(bftDialects);
      });
    </script>
</body>
</html>