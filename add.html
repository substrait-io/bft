<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>add - bft</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Reference for the add function">
    <link rel="stylesheet" href="./terminal.css">
    <link rel="stylesheet" href="./style.css">
</head>

<body class="terminal">
    <header class="container terminal-nav">
        <div class="terminal-logo">
            <div class="logo terminal-prompt">
                <a href="#">The BFT</a>
            </div>
        </div>
        <nav class="terminal-menu">
            <ul>
                <li>
                    <a href="./index.html" class="menu-item">Function Index</a>
                </li>
            </ul>
        </nav>
    </header>

    <article class="container">
        <h2>Add</h2>
        <section>
            <p>
                Defined in <a href="https://TODO">functions_arithmetic.yaml</a>
            </p>
            <hr>
            <p>
                Add two values.
            </p>
        </section>
        <hr>
        <section id="options">
            <h3>Options&nbsp;<a href="#options">&para;</a></h3>
            
                <h4>Overflow</h4>
                <p>Adding two integers can trigger an overflow when the result is outside the
representable range of the type class. This option controls what happens when
this overflow occurs.</p>
                <dl>
                    
                    <dt>SILENT</dt>
                    <dd><p>If an overflow occurs then an integer value will be returned. The value is
undefined. It may be any integer and can change from engine to engine or
even from row to row within the same query.  The only constraint is that it
must be a valid value for the result type class (e.g. adding two int16 cannot
yield an int32 on overflow)</p>
                    </dd>
                    
                    <dt>SATURATE</dt>
                    <dd><p>If an overflow occurs then the largest (for positive overflow) or smallest
(for negative overflow) possible value for the type class will be returned.</p>
                    </dd>
                    
                    <dt>ERROR</dt>
                    <dd><p>If an overflow occurs then an error should be raised.</p>
                    </dd>
                    
                </dl>
            
                <h4>Rounding</h4>
                <p>Adding two floating point numbers can yield a result that is not exactly
representable in the given type class. In this case the value will be rounded.
Rounding behaviors are defined as part of the IEEE 754 standard.</p>
                <dl>
                    
                    <dt>TIE_TO_EVEN</dt>
                    <dd><p>Round to the nearest value. If the number is exactly halfway between two
values then round to the number whose least significant digit is even. Or,
because we are working with binary digits, round to the number whose last digit
is 0. This is the default behavior in many systems because it helps to avoid
bias in rounding.</p>
                    </dd>
                    
                    <dt>TIE_AWAY_FROM_ZERO</dt>
                    <dd><p>Round to the nearest value. If the number is exactly halfway between two values
then round to the number furthest from zero.</p>
                    </dd>
                    
                    <dt>TRUNCATE</dt>
                    <dd><p>Round to the nearest value. If the number is exactly halfway between two values
then round to the value closest to zero.</p>
                    </dd>
                    
                    <dt>CEILING</dt>
                    <dd><p>Round to the value closest to positive infinity.</p>
                    </dd>
                    
                    <dt>FLOOR</dt>
                    <dd><p>Round to the value closest to negative infinity.</p>
                    </dd>
                    
                </dl>
            
        </section>
        <hr>
        <section id="kernels">
            <h3>Kernels&nbsp;<a href="#kernels">&para;</a></h3>
            <ul>
                
                <li class="bft-kernel"><span>add(i8, i8) -> i8 : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>add(i16, i16) -> i16 : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>add(i32, i32) -> i32 : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>add(i64, i64) -> i64 : [overflow]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>add(fp32, fp32) -> fp32 : [rounding]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
                <li class="bft-kernel"><span>add(fp64, fp64) -> fp64 : [rounding]</span><span hidden>&nbsp;(not supported by dialect)</span></li>
                
            </ul>
        </section>
        <hr>
        <section id="dialects">
            <h3>Dialects&nbsp;<a href="#dialects">&para;</a></h3>
            <select id="dialect">
                
                <option>datafusion</option>
                
                <option>cudf</option>
                
                <option>postgres</option>
                
                <option>sqlite</option>
                
                <option>velox_presto</option>
                
                <option>duckdb</option>
                
            </select>
            
            <dl class="dialect-definition" id="dialect-datafusion">
                
                <dt>overflow</dt>
                <dd>SILENT</dd>
                
                <dt>rounding</dt>
                <dd>TIE_TO_EVEN</dd>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-cudf">
                
                <dt>overflow</dt>
                <dd>SILENT</dd>
                
                <dt>rounding</dt>
                <dd>TIE_TO_EVEN</dd>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-postgres">
                
                <dt>overflow</dt>
                <dd>ERROR</dd>
                
                <dt>rounding</dt>
                <dd>TIE_TO_EVEN</dd>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-sqlite">
                
                <dt>overflow</dt>
                <dd>SILENT</dd>
                
                <dt>rounding</dt>
                <dd>TIE_TO_EVEN</dd>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-velox_presto">
                
                <dt>overflow</dt>
                <dd>ERROR</dd>
                
                <dt>rounding</dt>
                <dd>TIE_TO_EVEN</dd>
                
            </dl>
            
            <dl class="dialect-definition" id="dialect-duckdb">
                
                <dt>overflow</dt>
                <dd>ERROR</dd>
                
                <dt>rounding</dt>
                <dd>TIE_TO_EVEN</dd>
                
            </dl>
            
        </section>
        <hr>
        <section id="details">
            <h3>Details&nbsp;<a href="#details">&para;</a></h3>
            
            <h4>Other floating point exceptions</h4>
            <p>The IEEE 754 standard defines a number of exceptions beyond rounding. For
example, division by zero, overflow, and underflow. However, these exceptions
have default behaviors defined by IEEE 754 and, since no known engine deviates
from these default values, these exceptions are not exposed as options. For more
information on what happens in these cases refer to the IEEE 754 standard.</p>
            
            <h4>Not commutative</h4>
            <p>Addition, the algebraic operation, is commutative.  So it may be tempting to
believe the add function is commutative as well.  However, this is not true because
of overflow.  For example, when working with int8 the result of
add(add(120, 10), -5) will yield a different result than add(add(120, -5), 10)
because the first will overflow and the second will not.</p>
            
        </section>
        <hr>
        <section id="properties">
            <h3>Properties&nbsp;<a href="#properties">&para;</a></h3>
            <dl>
                
                <dt>NaN propagating</dt>
                <dd><p>If any of the inputs is NaN (and the other input is not null) then the output
will be NaN</p></dd>
                
                <dt>Null propagating</dt>
                <dd><p>If any of the inputs is null then the output will be null</p></dd>
                
                <dt>Stateless</dt>
                <dd><p>The output will be the same regardless of the order of input rows. This is not
guaranteed to be true for integer addition when overflow is SILENT.</p></dd>
                
            </dl>
        </section>
        <hr>
        <section id="examples">
            <h3>Examples&nbsp;<a href="#examples">&para;</a></h3>
            
            <table>
                <caption>Basic examples without any special cases</caption>
                <thead>
                    <tr>
                        
                        
                        <th>arg1 (i64)</th>
                        
                        <th>arg2 (i64)</th>
                        
                        <th>result (i64)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        
                        <td>120</td>
                        
                        <td>5</td>
                        
                        
                        <td>125</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>100</td>
                        
                        <td>100</td>
                        
                        
                        <td>200</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>30000</td>
                        
                        <td>30000</td>
                        
                        
                        <td>60000</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>2000000000</td>
                        
                        <td>2000000000</td>
                        
                        
                        <td>4000000000</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
            <table>
                <caption>Examples demonstrating exceptional floating point cases</caption>
                <thead>
                    <tr>
                        
                        
                        <th>arg1 (fp64)</th>
                        
                        <th>arg2 (fp64)</th>
                        
                        <th>result (fp64)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        
                        <td>1.5e+308</td>
                        
                        <td>1.5e+308</td>
                        
                        
                        <td>inf</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        
                        <td>-1.5e+308</td>
                        
                        <td>-1.5e+308</td>
                        
                        
                        <td>-inf</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
            <table>
                <caption>Examples demonstrating overflow behavior</caption>
                <thead>
                    <tr>
                        
                        <th>overflow</th>
                        
                        
                        <th>arg1 (i8)</th>
                        
                        <th>arg2 (i8)</th>
                        
                        <th>result (i8)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        <td>ERROR</td>
                        
                        
                        <td>120</td>
                        
                        <td>10</td>
                        
                        
                        <td>ERROR</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        <td>ERROR</td>
                        
                        
                        <td>30000</td>
                        
                        <td>30000</td>
                        
                        
                        <td>ERROR</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        <td>ERROR</td>
                        
                        
                        <td>2000000000</td>
                        
                        <td>2000000000</td>
                        
                        
                        <td>ERROR</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        <td>ERROR</td>
                        
                        
                        <td>9223372036854775807</td>
                        
                        <td>1</td>
                        
                        
                        <td>ERROR</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        <td>SATURATE</td>
                        
                        
                        <td>120</td>
                        
                        <td>10</td>
                        
                        
                        <td>127</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        <td>SATURATE</td>
                        
                        
                        <td>-120</td>
                        
                        <td>-10</td>
                        
                        
                        <td>-128</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        <td>SILENT</td>
                        
                        
                        <td>120</td>
                        
                        <td>10</td>
                        
                        
                        <td>UNDEFINED</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
            <table>
                <caption>Examples demonstrating floating point rounding behavior</caption>
                <thead>
                    <tr>
                        
                        <th>rounding</th>
                        
                        
                        <th>arg1 (fp32)</th>
                        
                        <th>arg2 (fp32)</th>
                        
                        <th>result (fp32)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        <td>TIE_TO_EVEN</td>
                        
                        
                        <td>4.5</td>
                        
                        <td>2.5000007152557373</td>
                        
                        
                        <td>7.000000953674316</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    
                    <tr class="bft-case">
                        
                        <td>FLOOR</td>
                        
                        
                        <td>4.5</td>
                        
                        <td>2.5000007152557373</td>
                        
                        
                        <td>7.000000476837158</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
            <table>
                <caption>Examples demonstrating behavior of different data types</caption>
                <thead>
                    <tr>
                        
                        
                        <th>arg1 (fp64)</th>
                        
                        <th>arg2 (fp64)</th>
                        
                        <th>result (fp64)</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr class="bft-case">
                        
                        
                        <td>4.5</td>
                        
                        <td>2.5000007152557373</td>
                        
                        
                        <td>7.000000715255737</td>
                        
                    </tr>
                    <tr class="bft-error-case bft-case-err-message" hidden>
                        <td colspan="4"/>
                    </tr>
                    </tbody>
            </table>
            
        </section>
    </article>
    <script src="./lib.js"></script>
    <script>
      var bftDialects = {
        
        'datafusion': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect datafusion expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect datafusion expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect datafusion expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect datafusion expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect datafusion expects overflow=SILENT but overflow=SATURATE was requested",
                
                
                
                  "The dialect datafusion expects overflow=SILENT but overflow=SATURATE was requested",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect datafusion expects rounding=TIE_TO_EVEN but rounding=FLOOR was requested",
                
                
                
                  null,
                
                
            ],
            kernels: [
                
                true,
                
                true,
                
                true,
                
                true,
                
                true,
                
                true,
                
            ]
        },
        
        'cudf': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect cudf expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect cudf expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect cudf expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect cudf expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect cudf expects overflow=SILENT but overflow=SATURATE was requested",
                
                
                
                  "The dialect cudf expects overflow=SILENT but overflow=SATURATE was requested",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect cudf expects rounding=TIE_TO_EVEN but rounding=FLOOR was requested",
                
                
                
                  null,
                
                
            ],
            kernels: [
                
                true,
                
                true,
                
                true,
                
                true,
                
                true,
                
                true,
                
            ]
        },
        
        'postgres': {
            examples: [
                
                
                  "The dialect postgres does not support the kernel add(i8, i8) -> i8",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect postgres does not support the kernel add(i8, i8) -> error",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect postgres does not support the kernel add(i8, i8) -> i8",
                
                
                
                  "The dialect postgres does not support the kernel add(i8, i8) -> i8",
                
                
                
                  "The dialect postgres does not support the kernel add(i8, i8) -> undefined",
                
                
                
                  "The dialect postgres does not support the kernel add(fp32, fp32) -> fp32",
                
                
                
                  "The dialect postgres does not support the kernel add(fp32, fp32) -> fp32",
                
                
                
                  null,
                
                
            ],
            kernels: [
                
                false,
                
                true,
                
                true,
                
                true,
                
                false,
                
                true,
                
            ]
        },
        
        'sqlite': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect sqlite expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect sqlite expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect sqlite expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect sqlite expects overflow=SILENT but overflow=ERROR was requested",
                
                
                
                  "The dialect sqlite expects overflow=SILENT but overflow=SATURATE was requested",
                
                
                
                  "The dialect sqlite expects overflow=SILENT but overflow=SATURATE was requested",
                
                
                
                  null,
                
                
                
                  "The dialect sqlite does not support the kernel add(fp32, fp32) -> fp32",
                
                
                
                  "The dialect sqlite does not support the kernel add(fp32, fp32) -> fp32",
                
                
                
                  null,
                
                
            ],
            kernels: [
                
                true,
                
                true,
                
                true,
                
                true,
                
                false,
                
                true,
                
            ]
        },
        
        'velox_presto': {
            examples: [
                
                
                  "The dialect velox_presto does not support the kernel add(i8, i8) -> i8",
                
                
                
                  "The dialect velox_presto does not support the kernel add(i16, i16) -> i16",
                
                
                
                  "The dialect velox_presto does not support the kernel add(i32, i32) -> i32",
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect velox_presto does not support the kernel add(i8, i8) -> error",
                
                
                
                  "The dialect velox_presto does not support the kernel add(i16, i16) -> error",
                
                
                
                  "The dialect velox_presto does not support the kernel add(i32, i32) -> error",
                
                
                
                  null,
                
                
                
                  "The dialect velox_presto does not support the kernel add(i8, i8) -> i8",
                
                
                
                  "The dialect velox_presto does not support the kernel add(i8, i8) -> i8",
                
                
                
                  "The dialect velox_presto does not support the kernel add(i8, i8) -> undefined",
                
                
                
                  "The dialect velox_presto does not support the kernel add(fp32, fp32) -> fp32",
                
                
                
                  "The dialect velox_presto does not support the kernel add(fp32, fp32) -> fp32",
                
                
                
                  null,
                
                
            ],
            kernels: [
                
                false,
                
                false,
                
                false,
                
                true,
                
                false,
                
                true,
                
            ]
        },
        
        'duckdb': {
            examples: [
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  null,
                
                
                
                  "The dialect duckdb expects overflow=ERROR but overflow=SATURATE was requested",
                
                
                
                  "The dialect duckdb expects overflow=ERROR but overflow=SATURATE was requested",
                
                
                
                  "The dialect duckdb expects overflow=ERROR but overflow=SILENT was requested",
                
                
                
                  null,
                
                
                
                  "The dialect duckdb expects rounding=TIE_TO_EVEN but rounding=FLOOR was requested",
                
                
                
                  null,
                
                
            ],
            kernels: [
                
                true,
                
                true,
                
                true,
                
                true,
                
                true,
                
                true,
                
            ]
        },
        
      };
      window.addEventListener('load', function() {
        window.bftInitialize(bftDialects);
      });
    </script>
</body>
</html>